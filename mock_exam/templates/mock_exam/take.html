{% extends "base.html" %}
{% block content %}
<div class="container mt-4">
    <div class="d-flex justify-content-between align-items-center mb-4">
        <h2>모의고사 ({{ mock_exam.start_time|date:"Y-m-d H:i" }})</h2>
        <span class="badge badge-primary">진행 중</span>
    </div>

    <form method="post" action="{% url 'mock_exam:submit' mock_exam.id %}">
        {% csrf_token %}
        {% for mq in questions %}
        <div class="card mb-4 shadow-sm">
            <div class="card-body">
                <h5 class="card-title text-success font-weight-bold">문제 {{ forloop.counter }}</h5>
                <p class="card-text" style="font-size: 1.1rem; font-weight: 500; white-space: pre-wrap;">{{
                    mq.question.content }}</p>
                {% if mq.question.image %}
                <div class="mb-3 text-center">
                    <img src="{{ mq.question.image.url }}" class="img-fluid rounded" style="max-height: 300px;">
                </div>
                {% endif %}

                <div class="list-group">
                    <label class="list-group-item list-group-item-action" style="cursor: pointer;">
                        <input class="form-check-input me-2" type="radio" name="question_{{ mq.id }}" value="1" {% if
                            mq.selected_choice==1 %}checked{% endif %}>
                        ① {{ mq.question.choice1 }}
                    </label>
                    <label class="list-group-item list-group-item-action" style="cursor: pointer;">
                        <input class="form-check-input me-2" type="radio" name="question_{{ mq.id }}" value="2" {% if
                            mq.selected_choice==2 %}checked{% endif %}>
                        ② {{ mq.question.choice2 }}
                    </label>
                    <label class="list-group-item list-group-item-action" style="cursor: pointer;">
                        <input class="form-check-input me-2" type="radio" name="question_{{ mq.id }}" value="3" {% if
                            mq.selected_choice==3 %}checked{% endif %}>
                        ③ {{ mq.question.choice3 }}
                    </label>
                    <label class="list-group-item list-group-item-action" style="cursor: pointer;">
                        <input class="form-check-input me-2" type="radio" name="question_{{ mq.id }}" value="4" {% if
                            mq.selected_choice==4 %}checked{% endif %}>
                        ④ {{ mq.question.choice4 }}
                    </label>
                    <label class="list-group-item list-group-item-action" style="cursor: pointer;">
                        <input class="form-check-input me-2" type="radio" name="question_{{ mq.id }}" value="5" {% if
                            mq.selected_choice==5 %}checked{% endif %}>
                        ⑤ {{ mq.question.choice5 }}
                    </label>
                </div>
            </div>
        </div>
        {% endfor %}

        <div class="text-center mb-5 sticky-bottom bg-white p-3 border-top"
            style="position: sticky; bottom: 0; z-index: 100;">
            <button type="submit" class="btn btn-success btn-lg px-5 shadow"
                onclick="return confirm('정말 제출하시겠습니까?');">제출 및 채점하기</button>
        </div>
    </form>
</div>
{% endblock %}