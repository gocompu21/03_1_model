{% load static %}
{% load markdown_extras %}
<!DOCTYPE html>
<html lang="ko">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ë³µìŠµ ì„¸ì…˜ - ë‚˜ë¬´ì˜ì‚¬</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script>
        window.MathJax = {
            tex: { inlineMath: [['$', '$'], ['\\(', '\\)']] },
            svg: { fontCache: 'global' }
        };
    </script>
    <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <style>
        body {
            margin: 0;
            padding: 0;
            font-family: 'Noto Sans KR', sans-serif;
            background-color: #f0f7f4;
        }

        header {
            background-color: #2d6a4f;
            padding: 15px 40px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
        }

        .logo {
            color: white;
            font-size: 1.5rem;
            font-weight: bold;
            text-decoration: none;
        }

        .container {
            max-width: 900px;
            margin: 30px auto;
            padding: 0 20px;
        }

        .header-section {
            background: white;
            border-radius: 12px;
            padding: 25px;
            margin-bottom: 20px;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.08);
            text-align: center;
        }

        .header-section h1 {
            color: #1b4332;
            margin: 0 0 10px 0;
        }

        .question-card {
            background: white;
            border-radius: 12px;
            padding: 25px;
            margin-bottom: 20px;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.08);
            border-left: 4px solid #2d6a4f;
        }

        .question-meta {
            color: #888;
            font-size: 0.85rem;
            margin-bottom: 10px;
        }

        .question-content {
            font-weight: 500;
            line-height: 1.6;
            margin-bottom: 20px;
        }

        .choices {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }

        .choice-item {
            display: flex;
            align-items: center;
            padding: 12px 15px;
            border: 2px solid #e0e0e0;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.2s;
        }

        .choice-item:hover {
            border-color: #2d6a4f;
            background-color: #f8f9fa;
        }

        .choice-item input {
            margin-right: 12px;
            transform: scale(1.2);
        }

        .choice-item input:checked+label {
            font-weight: bold;
            color: #2d6a4f;
        }

        .choice-item:has(input:checked) {
            border-color: #2d6a4f;
            background-color: #d8f3dc;
        }

        .btn-submit {
            display: block;
            width: 100%;
            padding: 18px;
            background-color: #2d6a4f;
            color: white;
            border: none;
            border-radius: 12px;
            font-size: 1.1rem;
            font-weight: bold;
            cursor: pointer;
            transition: background-color 0.3s;
        }

        .btn-submit:hover {
            background-color: #1b4332;
        }

        .empty-state {
            text-align: center;
            padding: 60px 20px;
            background: white;
            border-radius: 12px;
        }

        .empty-state i {
            font-size: 4rem;
            color: #2d6a4f;
            margin-bottom: 20px;
        }

        .q-number {
            width: 28px;
            height: 28px;
            background-color: #2d6a4f;
            color: white;
            border-radius: 50%;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            margin-right: 10px;
        }
    </style>
</head>

<body>
    <header>
        <a href="{% url 'main:index' %}" class="logo">ğŸŒ³ ë‚˜ë¬´ì˜ì‚¬ í•©ê²©ë°˜</a>
        <a href="{% url 'mypage:index' %}" style="color: white; text-decoration: none;">
            <i class="fas fa-arrow-left"></i> ë§ˆì´í˜ì´ì§€ë¡œ
        </a>
    </header>

    <div class="container">
        <div class="header-section">
            <h1><i class="fas fa-brain" style="color: #2d6a4f;"></i> ì˜¤ëŠ˜ì˜ ë³µìŠµ</h1>
            <p style="color: #666; margin: 0 0 15px 0;">ì´ <strong>{{ total_count }}</strong>ê°œì˜ ë¬¸ì œë¥¼ ë³µìŠµí•©ë‹ˆë‹¤.</p>
        </div>

        <div
            style="background: linear-gradient(135deg, #d8f3dc, #b7e4c7); padding: 20px; border-radius: 12px; margin-bottom: 25px;">
            <h3 style="color: #1b4332; margin: 0 0 12px 0; text-align: left;"><i class="fas fa-lightbulb"></i> ì™œ ë³µìŠµì´
                ì¤‘ìš”í• ê¹Œìš”?</h3>
            <p style="color: #333; line-height: 1.7; margin: 0 0 12px 0; text-align: left;">
                <strong>ì—ë¹™í•˜ìš°ìŠ¤ ë§ê°ê³¡ì„ </strong>ì— ë”°ë¥´ë©´, í•™ìŠµ í›„ 24ì‹œê°„ ë‚´ì— ì•½ 70%ì˜ ë‚´ìš©ì„ ìŠì–´ë²„ë¦½ë‹ˆë‹¤.<br>
                í•˜ì§€ë§Œ ì ì ˆí•œ ê°„ê²©ìœ¼ë¡œ ë³µìŠµí•˜ë©´ ê¸°ì–µì„ ì¥ê¸° ê¸°ì–µìœ¼ë¡œ ì „í™˜í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤!
            </p>
            <div style="display: flex; flex-wrap: wrap; gap: 10px; justify-content: center; margin-top: 15px;">
                <span
                    style="background: white; padding: 6px 14px; border-radius: 20px; font-size: 0.85rem; color: #2d6a4f;"><strong>1ì¼</strong>
                    â†’ ì²« ë³µìŠµ</span>
                <span
                    style="background: white; padding: 6px 14px; border-radius: 20px; font-size: 0.85rem; color: #2d6a4f;"><strong>3ì¼</strong>
                    â†’ 2ì°¨ ë³µìŠµ</span>
                <span
                    style="background: white; padding: 6px 14px; border-radius: 20px; font-size: 0.85rem; color: #2d6a4f;"><strong>7ì¼</strong>
                    â†’ 3ì°¨ ë³µìŠµ</span>
                <span
                    style="background: white; padding: 6px 14px; border-radius: 20px; font-size: 0.85rem; color: #2d6a4f;"><strong>14ì¼</strong>
                    â†’ 4ì°¨ ë³µìŠµ</span>
                <span
                    style="background: white; padding: 6px 14px; border-radius: 20px; font-size: 0.85rem; color: #2d6a4f;"><strong>30ì¼</strong>
                    â†’ ì™„ì „ í•™ìŠµ</span>
            </div>
        </div>

        {% if review_items %}
        <form method="POST" action="{% url 'mypage:review_submit' %}">
            {% csrf_token %}
            {% for item in review_items %}
            <div class="question-card">
                <div class="question-meta">
                    <span class="q-number">{{ forloop.counter }}</span>
                    {{ item.question.subject.name }} Â· ì œ{{ item.question.exam.round_number }}íšŒ
                    {{item.question.number}}ë²ˆ
                    <span style="float: right; color: #aaa;">ë³µìŠµ {{ item.review_count }}íšŒì°¨</span>
                </div>
                <div class="question-content">
                    {{ item.question.content }}
                </div>
                {% if item.question.image %}
                <div style="text-align: center; margin-bottom: 15px;">
                    <img src="{{ item.question.image.url }}"
                        style="max-width: 100%; border: 1px solid #ddd; border-radius: 8px;">
                </div>
                {% endif %}
                <div class="choices">
                    <label class="choice-item">
                        <input type="radio" name="schedule_{{ item.id }}" value="1">
                        <span>â‘  {{ item.question.choice1 }}</span>
                    </label>
                    <label class="choice-item">
                        <input type="radio" name="schedule_{{ item.id }}" value="2">
                        <span>â‘¡ {{ item.question.choice2 }}</span>
                    </label>
                    <label class="choice-item">
                        <input type="radio" name="schedule_{{ item.id }}" value="3">
                        <span>â‘¢ {{ item.question.choice3 }}</span>
                    </label>
                    <label class="choice-item">
                        <input type="radio" name="schedule_{{ item.id }}" value="4">
                        <span>â‘£ {{ item.question.choice4 }}</span>
                    </label>
                    <label class="choice-item">
                        <input type="radio" name="schedule_{{ item.id }}" value="5">
                        <span>â‘¤ {{ item.question.choice5 }}</span>
                    </label>
                </div>
            </div>
            {% endfor %}

            <button type="submit" class="btn-submit">
                <i class="fas fa-check-circle"></i> ë³µìŠµ ì™„ë£Œí•˜ê¸°
            </button>
        </form>
        {% else %}
        <div class="empty-state">
            <i class="fas fa-check-circle"></i>
            <h2 style="color: #1b4332;">ì˜¤ëŠ˜ ë³µìŠµí•  ë¬¸ì œê°€ ì—†ìŠµë‹ˆë‹¤!</h2>
            <p style="color: #666;">ì˜í•˜ê³  ìˆì–´ìš”. ë‹¤ìŒ ë³µìŠµ ì•Œë¦¼ê¹Œì§€ ì‰¬ì–´ê°€ì„¸ìš”. ğŸ‰</p>
            <a href="{% url 'mypage:index' %}"
                style="display: inline-block; margin-top: 20px; padding: 12px 30px; background-color: #2d6a4f; color: white; text-decoration: none; border-radius: 25px;">
                ë§ˆì´í˜ì´ì§€ë¡œ ëŒì•„ê°€ê¸°
            </a>
        </div>
        {% endif %}
    </div>
</body>

</html>